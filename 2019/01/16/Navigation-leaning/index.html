<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Navigation,fragment," />










<meta name="description" content="概念导航是应用程序设计的重要组成部分。通过导航，您可以设计允许用户在应用内的不同内容区域移动，进出和退出的交互。 导航架构组件导航架构组件可帮助您在应用程序中实现常见但复杂的导航要求，使您能够更轻松地为用户提供一致且可预测的体验。 导航可处理在应用程序的目的地之间导航- 也就是说，在应用程序中用户可以导航到任何位置。虽然目标通常通过Fragments代表特定的屏幕，但导航架构组件支持下面列出的其他">
<meta name="keywords" content="Navigation,fragment">
<meta property="og:type" content="article">
<meta property="og:title" content="Navigation官方译文">
<meta property="og:url" content="https://cattlefoot.github.io/2019/01/16/Navigation-leaning/index.html">
<meta property="og:site_name" content="CallteFoot&#39;s blog">
<meta property="og:description" content="概念导航是应用程序设计的重要组成部分。通过导航，您可以设计允许用户在应用内的不同内容区域移动，进出和退出的交互。 导航架构组件导航架构组件可帮助您在应用程序中实现常见但复杂的导航要求，使您能够更轻松地为用户提供一致且可预测的体验。 导航可处理在应用程序的目的地之间导航- 也就是说，在应用程序中用户可以导航到任何位置。虽然目标通常通过Fragments代表特定的屏幕，但导航架构组件支持下面列出的其他">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://cattlefoot.github.io/2019/01/16/Navigation-leaning/images/navigation-grap.png">
<meta property="og:image" content="https://cattlefoot.github.io/2019/01/16/Navigation-leaning/images/navigation-editor.png">
<meta property="og:image" content="https://cattlefoot.github.io/2019/01/16/Navigation-leaning/images/navigation-destination-and-placeholder_2x.png">
<meta property="og:image" content="https://cattlefoot.github.io/2019/01/16/Navigation-leaning/images/navigation-actioncircle_2x.png">
<meta property="og:image" content="https://cattlefoot.github.io/2019/01/16/Navigation-leaning/images/navigation-connected_2x.png">
<meta property="og:image" content="https://cattlefoot.github.io/2019/01/16/Navigation-leaning/images/top-app-bar.png">
<meta property="og:image" content="https://cattlefoot.github.io/2019/01/16/Navigation-leaning/images/navigation-drawer.png">
<meta property="og:image" content="https://cattlefoot.github.io/2019/01/16/Navigation-leaning/images/bottom-navigation.png">
<meta property="og:image" content="https://cattlefoot.github.io/2019/01/16/Navigation-leaning/images/navigation-pre-nestedgraph_2x.png">
<meta property="og:image" content="https://cattlefoot.github.io/2019/01/16/Navigation-leaning/images/navigation-nestedgraph_2x.png">
<meta property="og:image" content="https://cattlefoot.github.io/2019/01/16/Navigation-leaning/images/navigation-conditional-graph.png">
<meta property="og:image" content="https://cattlefoot.github.io/2019/01/16/Navigation-leaning/images/navigation-global-action.png">
<meta property="og:image" content="https://cattlefoot.github.io/2019/01/16/Navigation-leaning/images/navigation-migrate1.png">
<meta property="og:image" content="https://cattlefoot.github.io/2019/01/16/Navigation-leaning/images/navigation-migrate2.png">
<meta property="og:image" content="https://cattlefoot.github.io/2019/01/16/Navigation-leaning/images/navigation-migrate3.png">
<meta property="og:updated_time" content="2019-01-19T05:59:04.185Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Navigation官方译文">
<meta name="twitter:description" content="概念导航是应用程序设计的重要组成部分。通过导航，您可以设计允许用户在应用内的不同内容区域移动，进出和退出的交互。 导航架构组件导航架构组件可帮助您在应用程序中实现常见但复杂的导航要求，使您能够更轻松地为用户提供一致且可预测的体验。 导航可处理在应用程序的目的地之间导航- 也就是说，在应用程序中用户可以导航到任何位置。虽然目标通常通过Fragments代表特定的屏幕，但导航架构组件支持下面列出的其他">
<meta name="twitter:image" content="https://cattlefoot.github.io/2019/01/16/Navigation-leaning/images/navigation-grap.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://cattlefoot.github.io/2019/01/16/Navigation-leaning/"/>





  <title>Navigation官方译文 | CallteFoot's blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">CallteFoot's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Victory belongs to the most persevering.</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://cattlefoot.github.io/2019/01/16/Navigation-leaning/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CallteFoot">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CallteFoot's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Navigation官方译文</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-16T10:12:08+08:00">
                2019-01-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><p>导航是应用程序设计的重要组成部分。通过导航，您可以设计允许用户在应用内的不同内容区域移动，进出和退出的交互。</p>
<h4 id="导航架构组件"><a href="#导航架构组件" class="headerlink" title="导航架构组件"></a>导航架构组件</h4><p>导航架构组件可帮助您在应用程序中实现常见但复杂的导航要求，使您能够更轻松地为用户提供一致且可预测的体验。</p>
<p>导航可处理在应用程序的目的地之间导航- 也就是说，在应用程序中用户可以导航到任何位置。虽然目标通常通过Fragments代表特定的屏幕，但导航架构组件支持下面列出的其他目标类型：</p>
<ul>
<li>Activities</li>
<li>导航图和子图 - 当目标是图形或子图时，用户导航到该图或子图的起始目标</li>
<li><a href="https://developer.android.com/topic/libraries/architecture/navigation/navigation-add-new.html" target="_blank" rel="noopener">自订目标类型</a></li>
</ul>
<p>这些目的地通过操作连接，一系列的目的地和连接操作组成应用程序的导航图。</p>
<p>导航架构组件提供了许多其他好处，包括：  </p>
<ul>
<li>处理Fragment事务</li>
<li>默认情况下正确处理向上和向后操作</li>
<li>为动画和过渡提供标准化资源</li>
<li>将深层链接视为一级操作</li>
<li>包括导航UI模式，例如导航抽屉和底部导航，只需最少的额外工作</li>
<li>在导航传递参数时提供类型安全性</li>
<li>使用Android Studio的<a href="https://developer.android.com/topic/libraries/architecture/navigation/navigation-implementing" target="_blank" rel="noopener">导航编辑器</a>可视化和编辑导航图</li>
</ul>
<p>⚠️：如果要将导航架构组件与Android Studio一起使用，则必须使用<a href="https://developer.android.com/studio/preview/" target="_blank" rel="noopener">Android Studio 3.2 Canary 14或更高版本</a>。</p>
<h4 id="导航原理"><a href="#导航原理" class="headerlink" title="导航原理"></a>导航原理</h4><p>导航架构组件基于以下设计原则：</p>
<h5 id="固定起始目的地"><a href="#固定起始目的地" class="headerlink" title="固定起始目的地"></a>固定起始目的地</h5><p>应用应具有固定的起始目的地，即用户从启动器启动应用时看到的屏幕，以及用户在按下后退按钮返回启动器之前看到的最后一个屏幕。</p>
<p>⚠️：应用可能具有一次性设置或一系列登录屏幕。这些条件屏幕不应被视为您应用的起始目的地。</p>
<h5 id="导航状态应该通过堆栈目的地来表示"><a href="#导航状态应该通过堆栈目的地来表示" class="headerlink" title="导航状态应该通过堆栈目的地来表示"></a>导航状态应该通过堆栈目的地来表示</h5><p>一个导航堆栈应该有应用程序的起始目标在堆栈的底部，并在堆栈顶部的当前目标。</p>
<p>更改导航堆栈的操作应始终在导航堆栈的顶部操作，方法是将新目标推送到堆栈顶部或从堆栈顶部弹出最顶层目标。</p>
<h5 id="“向上”按钮永远不会退出您的应用"><a href="#“向上”按钮永远不会退出您的应用" class="headerlink" title="“向上”按钮永远不会退出您的应用"></a>“向上”按钮永远不会退出您的应用</h5><p>如果用户位于起始目的地，则不应显示“向上”按钮。当您的应用程序使用其他应用程序任务的深层链接启动时，Up应该将用户带到分层父目标，而不是返回到其他应用程序。</p>
<h5 id="在应用程序的任务中，向上和向后相同"><a href="#在应用程序的任务中，向上和向后相同" class="headerlink" title="在应用程序的任务中，向上和向后相同"></a>在应用程序的任务中，向上和向后相同</h5><p>当系统“后退”按钮不会退出您的应用程序时，例如当您执行自己的任务而不是启动目标时，“向上”按钮的功能应与系统“后退”按钮完全相同。</p>
<h5 id="深度链接和导航到目标应该产生相同的堆栈"><a href="#深度链接和导航到目标应该产生相同的堆栈" class="headerlink" title="深度链接和导航到目标应该产生相同的堆栈"></a>深度链接和导航到目标应该产生相同的堆栈</h5><p>用户应该能够使用“后退”或“上移”按钮，无论他们如何到达目的地，都可以通过目的地返回到起始目的地。<br>深度链接时，将删除任何现有的导航堆栈，并替换为深层链接的导航堆栈。</p>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>通过导航组件实现导航，Jetpack的架构组件通过提供一组处理大部分细节的导航组件，可以轻松实现应用内导航。</p>
<p>使用Navigation，您可以创建导航图，这是一种XML资源，表示应用程序中的各个目标节点以及连接节点的操作。</p>
<p>下图显示了一个示例应用程序的导航图的直观表示，该应用程序包含通过5个操作连接的6个目标。<br><img src="./images/navigation-grap.png" alt="导航图"></p>
<p>一个目标就是你可以在你的应用程序导航到任何地方。虽然目标通常是表示特定屏幕的Fragments，但导航支持其他目标类型：</p>
<ul>
<li>Activities</li>
<li>导航图和子图-当目标是图形或子图时，导航到该图或子图的起始目标</li>
<li><a href="https://developer.android.com/topic/libraries/architecture/navigation/navigation-add-new.html" target="_blank" rel="noopener">自订目标类型</a><br>⚠️：导航组件专为具有一个具有多个Fragment目标的主要activity的应用程序而设计。主activity托管导航图，并负责根据需要交换目标。在具有多个activity目标的应用中，每个附加activity都会托管自己的导航图。有关更多信息，请参阅<a href="https://developer.android.com/topic/libraries/architecture/navigation/navigation-implementing#Modify-activity" target="_blank" rel="noopener">修改活动以主持导航</a> 。</li>
</ul>
<h4 id="为项目引入导航组件"><a href="#为项目引入导航组件" class="headerlink" title="为项目引入导航组件"></a>为项目引入导航组件</h4><p>⚠️：如果您要使用Android Studio导航，则必须使用 <a href="https://developer.android.com/studio/preview/" target="_blank" rel="noopener">Android Studio 3.2 Canary 14或更高版本</a>。</p>
<p>要在项目中包含导航支持，请将以下内容添加到应用程序的 build.gradle文件中。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    def nav_version = <span class="string">"1.0.0-alpha09"</span></span><br><span class="line"></span><br><span class="line">    implementation <span class="string">"android.arch.navigation:navigation-fragment:$nav_version"</span> <span class="comment">// use -ktx for Kotlin</span></span><br><span class="line">    implementation <span class="string">"android.arch.navigation:navigation-ui:$nav_version"</span> <span class="comment">// use -ktx for Kotlin</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>有关向项目添加其他体系结构组件的信息，请参阅向项目 <a href="https://developer.android.com/topic/libraries/architecture/adding-components#navigation" target="_blank" rel="noopener">添加组件</a>。</p>
<h4 id="创建导航图"><a href="#创建导航图" class="headerlink" title="创建导航图"></a>创建导航图</h4><p>要向项目添加导航图，请执行以下操作：</p>
<ol>
<li>在“项目”窗口中，右键单击该res目录，然后选择 <strong>New &gt; Android Resource File</strong>。出现 <strong>New Resource File</strong> 对话框。</li>
<li>在 <strong> File name</strong> 字段中键入名称，例如“nav_graph”。</li>
<li>从 <strong>Resource type</strong> 下拉列表中选择 <strong>Navigation</strong>。</li>
<li><p>单击 <strong>OK</strong> 。发生以下情况：</p>
<ul>
<li>在navigation目录中创建资源res目录。</li>
<li>nav_graph.xml在导航目录中创建一个文件。</li>
<li>该 nav_graph.xml文件将在导航编辑器中打开。此XML文件包含导航图。</li>
</ul>
</li>
<li><p>单击 <strong>Text</strong> 选项卡以切换到XML文本视图。您应该看到一个空的导航图，如以下示例所示：</p>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">navigation</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">navigation</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol>
<li>单击 <strong>Design</strong> 返回 Navigation Editor。</li>
</ol>
<h4 id="浏览导航编辑器"><a href="#浏览导航编辑器" class="headerlink" title="浏览导航编辑器"></a>浏览导航编辑器</h4><p>在Navigation Editor中，您可以直观地编辑导航图，而不是直接编辑基础XML。<br><img src="./images/navigation-editor.png" alt="导航编辑器"></p>
<ul>
<li>目的地：列出导航主机和当前位于“ 曲线图编辑器”中的所有目的地。</li>
<li>图表编辑器：包含导航图的可视化表示。</li>
<li>属性：显示导航图中当前所选项的属性。</li>
</ul>
<h4 id="创建目的地"><a href="#创建目的地" class="headerlink" title="创建目的地"></a>创建目的地</h4><p>创建导航图的第一步是识别和创建应用的各个目标。您可以在现有项目中的Fragments和Activities中创建目标，也可以创建占位符目标，以后可以使用Fragments或Activities替换它们。</p>
<p>如果您要将现有片段或活动添加到导航图中，或者如果要添加占位符，请单击 <strong>New Destination</strong> ➕，然后在下拉列表中单击相应的片段，活动或占位符目标。出现。现在，您可以在 <strong>Design</strong> 视图中查看目标的预览以及导航图的“ 文本”视图中的相应XML 。</p>
<p>要创建新的目标类型，请执行以下操作：  </p>
<ol>
<li>在导航编辑器中，单击 <strong>New Destination</strong> ➕，然后单击 <strong>Create blank destination</strong> 。</li>
<li>在出现的 <strong>New Android Component </strong> 对话框中，输入 <strong>Fragment Name</strong> 。这是Fragment类的名称。</li>
<li>要让Android Studio为Fragment创建相应的布局资源文件，请选中 <strong>Create layout XML</strong> 旁边的框，然后在 <strong>Fragment Layout Name</strong> 字段中输入资源名称。</li>
<li>在 <strong>Source Language</strong> 下拉列表中，为类源文件选择Kotlin或Java。</li>
<li>单击完成。<br>新目标类型显示在导航编辑器中。Android Studio还以指定的源语言创建相应的类文件，如果指定，还会为新目标类型创建布局资源文件。</li>
</ol>
<p>图显示了目标和占位符的示例。<br><img src="./images/navigation-destination-and-placeholder_2x.png" alt="目标和占位符"></p>
<p>可以单击任何目的地以选择它。选择目标时，<strong>Attributes</strong> 面板中将显示以下属性：</p>
<ul>
<li><strong>Type</strong> 字段指示目标是否在源代码中实现为片段或活动。</li>
<li><strong>Label</strong> 字段包含目标的XML布局文件的名称。</li>
<li><strong>ID</strong> 字段包含被用于指在代码中的目的地的目的地的ID。</li>
<li><strong>Class</strong> 下拉列表显示与目标关联的类的名称。您可以单击此下拉列表将关联的类更改为其他目标类型。</li>
</ul>
<p>⚠️：占位符与类无关。请务必在运行应用程序之前更改类值。</p>
<p>单击 <strong>Text</strong> 选项卡以显示导航图的XML视图。XML包含相同的id，name，label，和layout属性的目的地，如下所示：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">navigation</span> <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:startDestination</span>=<span class="string">"@id/blankFragment"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">fragment</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/blankFragment"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"com.example.cashdog.cashdog.BlankFragment"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:label</span>=<span class="string">"Blank"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">tools:layout</span>=<span class="string">"@layout/fragment_blank"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">navigation</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="连接目的地"><a href="#连接目的地" class="headerlink" title="连接目的地"></a>连接目的地</h4><p>您必须有多个目标才能连接目标。以下是包含两个空白目标的导航图的XML：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">navigation</span> <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:startDestination</span>=<span class="string">"@id/blankFragment"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">fragment</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/blankFragment"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"com.example.cashdog.cashdog.BlankFragment"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:label</span>=<span class="string">"fragment_blank"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">tools:layout</span>=<span class="string">"@layout/fragment_blank"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">fragment</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/blankFragment2"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"com.example.cashdog.cashdog.BlankFragment2"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:label</span>=<span class="string">"Blank2"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">tools:layout</span>=<span class="string">"@layout/fragment_blank_fragment2"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">navigation</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>目的地使用动作连接。要连接两个目标，请执行以下操作：</p>
<ol>
<li>在 <strong>Design</strong> 选项卡中，将鼠标悬停在您希望用户导航的目标的右侧。目的地上会出现一个圆圈。<br><img src="./images/navigation-actioncircle_2x.png" alt="视图设计"><br>图4.动作连接圈</li>
<li><p>单击并按住，将光标拖到您希望用户导航到的目标上，然后释放。绘制一条线以指示两个目的地之间的导航。<br><img src="./images/navigation-connected_2x.png" alt="连接目的地"><br>图5.连接目的地<br>单击箭头以突出显示该操作。<strong>Attributes</strong> 面板中显示以下属性：</p>
<ul>
<li>Type 字段包含 Action。</li>
<li>该ID字段包含动作ID。</li>
<li>Destination 字段包含所述目的地片Fragment或Activity的ID。<br>单击 <strong>Text</strong> 选项卡以切换到XML视图。现在，操作元素已添加到源目标。该操作具有ID和目标属性，其中包含下一个目标的ID，如下例所示：</li>
</ul>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">navigation</span> <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:startDestination</span>=<span class="string">"@id/blankFragment"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">fragment</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/blankFragment"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"com.example.cashdog.cashdog.BlankFragment"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:label</span>=<span class="string">"fragment_blank"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">tools:layout</span>=<span class="string">"@layout/fragment_blank"</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/action_blankFragment_to_blankFragment2"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:destination</span>=<span class="string">"@id/blankFragment2"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">fragment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">fragment</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/blankFragment2"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"com.example.cashdog.cashdog.BlankFragment2"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:label</span>=<span class="string">"fragment_blank_fragment2"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">tools:layout</span>=<span class="string">"@layout/fragment_blank_fragment2"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">navigation</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="将屏幕指定为起始目的地"><a href="#将屏幕指定为起始目的地" class="headerlink" title="将屏幕指定为起始目的地"></a>将屏幕指定为起始目的地</h4><p>导航编辑器使用🏠来指示用户在打开应用程序时看到的第一个屏幕，也称为 起始目的地。</p>
<p>要选择其他起始目的地，请执行以下操作：</p>
<ol>
<li><p>在 <strong>Design</strong> 选项卡中，单击新的起始目标以突出显示它。</p>
</li>
<li><p>单击 <strong>Assign start destination</strong> 按钮🏠。或者，您可以右键单击目标，然后单击 <strong>Set as Start Destination</strong>。</p>
</li>
</ol>
<h4 id="修改活动以主持导航"><a href="#修改活动以主持导航" class="headerlink" title="修改活动以主持导航"></a>修改活动以主持导航</h4><p>Activity为NavHost中的应用程序提供导航。 NavHost是一个空容器，当用户浏览您的应用程序时，目的地会被换入和换出。<br>Navigation组件中默认NavHost的实现是NavHostFragment。</p>
<h5 id="使用布局编辑器添加NavHostFragment"><a href="#使用布局编辑器添加NavHostFragment" class="headerlink" title="使用布局编辑器添加NavHostFragment"></a>使用布局编辑器添加NavHostFragment</h5><p>您可以使用布局编辑器通过以下步骤将NavHostFragment添加到Activity：   </p>
<ol>
<li>如果您还没有导航图资源，请创建导航图资源。</li>
<li>在项目文件列表中，双击活动的布局XML文件，在布局编辑器中将其打开。</li>
<li>在Palette窗格中，选择Containers类别，或者搜索“NavHostFragment”。</li>
<li>将NavHostFragment视图拖到您的活动上。</li>
<li>接下来，在出现的 <strong>Navigation Graphs</strong> 对话框中，选择要与其关联的相应导航图NavHostFragment，然后单击 <strong>OK</strong> 。</li>
</ol>
<p>回到 <strong>Text</strong> 视图，请注意Android Studio添加了类似于以下内容的XML：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.constraint.ConstraintLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">".MainActivity"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">fragment</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/nav_host_fragment"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"androidx.navigation.fragment.NavHostFragment"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"0dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintLeft_toLeftOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintRight_toRightOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        <span class="attr">app:defaultNavHost</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:navGraph</span>=<span class="string">"@navigation/mobile_navigation"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.constraint.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>该app:defaultNavHost=”true”属性确保您NavHostFragment 拦截系统后退按钮。您还可以通过覆盖AppCompatActivity.onSupportNavigateUp() 和调用来实现此行为NavController.navigateUp，如下例所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*  override fun onSupportNavigateUp(): Boolean &#123;</span></span><br><span class="line"><span class="comment">          return Navigation.findNavController(this, R.id.fragment_nav).navigateUp()</span></span><br><span class="line"><span class="comment">      &#125;*/</span></span><br><span class="line"></span><br><span class="line"><span class="function">override fun <span class="title">onSupportNavigateUp</span><span class="params">()</span> </span>= Navigation.findNavController(<span class="keyword">this</span>, R.id.fragment_nav).navigateUp()</span><br></pre></td></tr></table></figure>
<h4 id="以编程方式创建NavHostFragment"><a href="#以编程方式创建NavHostFragment" class="headerlink" title="以编程方式创建NavHostFragment"></a>以编程方式创建NavHostFragment</h4><p>您还可以使用NavHostFragment.create() 以编程方式创建NavHostFragment具有特定图形资源的资源，如以下示例所示：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">val finalHost = NavHostFragment.create(R.navigation.example_graph)</span><br><span class="line">supportFragmentManager.beginTransaction()</span><br><span class="line">    .replace(R.id.nav_host, finalHost)</span><br><span class="line">    .setPrimaryNavigationFragment(finalHost) <span class="comment">// this is the equivalent to app:defaultNavHost="true"</span></span><br><span class="line">    .commit()</span><br></pre></td></tr></table></figure></p>
<h4 id="将目标绑定到ui小部件"><a href="#将目标绑定到ui小部件" class="headerlink" title="将目标绑定到ui小部件"></a>将目标绑定到ui小部件</h4><p>使用NavController类导航到目标。 可以使用以下静态方法之一检索NavController：：</p>
<ul>
<li>NavHostFragment.findNavController(Fragment)</li>
<li>Navigation.findNavController(Activity, @IdRes int viewId)</li>
<li>Navigation.findNavController(View)<br>检索后 NavController，使用其 navigate() 方法导航到目标。该 navigate() 方法接受资源ID。ID可以是导航图或操作中特定目标的ID。使用操作的ID而不是目标的资源ID具有优势，例如将过渡与导航相关联。有关转换的更多信息，请参阅<a href="https://developer.android.com/topic/libraries/architecture/navigation/navigation-implementing#Create-transition" target="_blank" rel="noopener">创建目标之间的转换</a>。</li>
</ul>
<p>以下代码段显示了如何导航到 ViewTransactionsFragment：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">viewTransactionsButton.setOnClickListener &#123; view -&gt;</span><br><span class="line">   view.findNavController().navigate(R.id.viewTransactionsAction)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Android系统维护一个包含最后访问目的地的 <strong>back stack</strong> 。当用户打开应用程序时，应用程序的第一个目标位于堆栈中。每次调用该 navigate() 方法都会将另一个目标放在堆栈顶部。相反，按“向上”或“返回”按钮分别调用 NavController.navigateUp() 和 NavController.popBackStack() 方法，将顶部目标弹出堆栈。</p>
<p>对于按钮，您还可以使用 Navigation类的 createNavigateOnClickListener() 便捷方法导航到目标：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">button.setOnClickListener(Navigation.createNavigateOnClickListener(R.id.next_fragment, null))</span><br></pre></td></tr></table></figure></p>
<p>要处理其他常见UI组件，例如顶部应用栏和底部导航，请参阅<a href="https://developer.android.com/topic/libraries/architecture/navigation/navigation-ui" target="_blank" rel="noopener">使用NavigationUI更新UI组件</a>。</p>
<h4 id="为目标创建深层链接"><a href="#为目标创建深层链接" class="headerlink" title="为目标创建深层链接"></a>为目标创建深层链接</h4><p>在Android中，<a href="https://developer.android.com/training/app-links/deep-linking" target="_blank" rel="noopener">深层链接</a>是指向应用中特定目标的URI。当您想要将用户发送到特定目的地以在您的应用中执行某项任务时，这些URI很有用，例如发送资金流，允许用户快速汇款给某人。</p>
<h5 id="为目标分配深层链接"><a href="#为目标分配深层链接" class="headerlink" title="为目标分配深层链接"></a>为目标分配深层链接</h5><p>要在导航图中为目标指定深层链接，请执行以下操作：</p>
<ul>
<li>在 <strong>Design</strong> 视图中，选择深层链接的目标。</li>
<li>单击 <strong>Add deep link</strong> 按钮🔗（或单击 <strong>Attributes</strong> 面板的 <strong>Deep Links</strong> 部分中的➕）。出现 <strong>Add Deep Link</strong> 对话框。</li>
<li>在URI字段中键入URI，例如“www.cashdog.com/sendmoney”，它表示应用中发送货币嵌套图的起始目的地。</li>
</ul>
<p>请注意以下事项：  </p>
<ul>
<li>未指定协议的URI被假定为http或https。例如， www.cashdog.com匹配<a href="http://www.cashdog.com" target="_blank" rel="noopener">http://www.cashdog.com</a> 或<a href="https://www.cashdog.com。" target="_blank" rel="noopener">https://www.cashdog.com。</a></li>
<li>占位符的{placeholder_name}匹配形式为1个或多个字符。String占位符的值在Bundle带有相同名称的键的参数中可用。例如，<a href="http://www.example.com/users/{id}匹配http://www.example.com/users/4" target="_blank" rel="noopener">http://www.example.com/users/{id}匹配http://www.example.com/users/4</a>.</li>
<li>。*通配符可用于匹配0个或多个字符。<ul>
<li>（可选）选中 <strong>Auto Verify</strong> 以要求Google验证您是URI的所有者。有关更多信息，请参阅<a href="deepLink app:uri=&quot;https://cashdog.com/sendmoney&quot;/">验证Android应用程序链接</a>。</li>
<li>单击 <strong>Add</strong>。 所选目标上方会显示一个链接图标，表示该目标具有深层链接。</li>
<li>单击 <strong>Text</strong> 选项卡以切换到XML视图。已将嵌套的深层链接元素添加到目标：<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">deepLink</span> <span class="attr">app:uri</span>=<span class="string">"https://cashdog.com/sendmoney"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p>当用户从深层链接目标按下“后退”按钮时，他们会导航回导航堆栈，就像他们从应用程序的入口点进入您的应用程序一样。</p>
<h5 id="为深层链接添加意图过滤器"><a href="#为深层链接添加意图过滤器" class="headerlink" title="为深层链接添加意图过滤器"></a>为深层链接添加意图过滤器</h5><p>您必须添加manifest.xml文件以在您的应用中启用深层链接：</p>
<p>对于Android Studio 3.0和3.1，您必须手动添加intent-filter 元素。有关更多信息，请参阅 创建应用程序内容的深层链接。<br>对于Android Studio 3.2+，您可以nav-graph向活动元素添加元素：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span> <span class="attr">name</span>=<span class="string">".MainActivity"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">nav-graph</span> <span class="attr">android:value</span>=<span class="string">"@navigation/main_nav"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>作为清单合并构建步骤的一部分，此元素将替换<intent-filter>为匹配导航图中所有深层链接所需的生成元素。</intent-filter></p>
<h5 id="以编程方式使用NavDeepLinkBuilder创建深层链接"><a href="#以编程方式使用NavDeepLinkBuilder创建深层链接" class="headerlink" title="以编程方式使用NavDeepLinkBuilder创建深层链接"></a>以编程方式使用NavDeepLinkBuilder创建深层链接</h5><p>您可以使用NavDeepLinkBuilder该类构建一个PendingIntent 将用户带到特定目标的类。</p>
<p>触发此深层链接时，将清除任务后台堆栈并替换为深层链接目标。当嵌套图表，从每一级的开始目的地嵌套的，也就是说，从每个目的地开始 <navigation>在元件层次结构也被添加到堆栈中。</navigation></p>
<p>您可以PendingIntent直接 构造一个NavDeepLinkBuilder(Context)，如下面的示例所示。请注意，如果提供的上下文不是a Activity，则构造函数将使用 PackageManager.getLaunchIntentForPackage() 作为默认活动来启动（如果可用）。<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> pendingIntent = NavDeepLinkBuilder(context)</span><br><span class="line">    .setGraph(R.navigation.mobile_navigation)</span><br><span class="line">    .setDestination(R.id.android)</span><br><span class="line">    .setArguments(args)</span><br><span class="line">    .createPendingIntent()</span><br></pre></td></tr></table></figure></p>
<p>有关包含此示例的完整导航项目，请参阅 <a href="https://codelabs.developers.google.com/codelabs/android-navigation/#0" target="_blank" rel="noopener">Navigation Codelab</a>。</p>
<p>⚠️：如果您有现有的NavController，您还可以通过创建深层链接NavController.createDeepLink()。</p>
<h5 id="在目的地之间创建过渡"><a href="#在目的地之间创建过渡" class="headerlink" title="在目的地之间创建过渡"></a>在目的地之间创建过渡</h5><p>导航组件提供了在目的地之间轻松添加转换（例如淡入和淡出）的功能。要添加转换，请执行以下操作：</p>
<ol>
<li>创建动画资源文件。导航支持属性和视图动画。有关详细信息，请参阅 <a href="https://developer.android.com/guide/topics/resources/animation-resource" target="_blank" rel="noopener">Animation resources</a>。</li>
<li>在导航编辑器的 <strong><a href="https://developer.android.com/guide/topics/resources/animation-resource" target="_blank" rel="noopener">https://developer.android.com/guide/topics/resources/animation-resource</a></strong> 选项卡中，单击要进行转换的操作。</li>
<li>在 <strong>Attributes</strong> 面板的 <strong>Transitions</strong> 部分中，单击 <strong>Enter</strong> 旁边的向下箭头以显示项目中可用过渡的列表。</li>
<li>选择用户进入目的地时发生的转换。</li>
<li>回到 <strong>Transitions</strong> 部分，单击 <strong>Exit</strong> 旁边的向下箭头，然后选择当用户退出目标时发生的转换。</li>
<li>单击 <strong>Text</strong> 选项卡以切换到XML文本视图。转换的XML出现在指定操作的<action>元素中。该操作嵌入在转换发生之前处于活动状态的目标的XML中。在以下示例中，   specifyAmountFragment是活动目标，因此它包含具有过渡动画的操作：<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">fragment</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/specifyAmountFragment"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">"com.example.buybuddy.buybuddy.SpecifyAmountFragment"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:label</span>=<span class="string">"fragment_specify_amount"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:layout</span>=<span class="string">"@layout/fragment_specify_amount"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">action</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/confirmationAction"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:destination</span>=<span class="string">"@id/confirmationFragment"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:enterAnim</span>=<span class="string">"@anim/slide_in_right"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:exitAnim</span>=<span class="string">"@anim/slide_out_left"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:popEnterAnim</span>=<span class="string">"@anim/slide_in_left"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:popExitAnim</span>=<span class="string">"@anim/slide_out_right"</span> /&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">fragment</span>&gt;</span></span><br></pre></td></tr></table></figure>
</action></li>
</ol>
<p>在此示例中，我们在移动到目的地时（enterAnim以及exitAnim退出该目标（popEnterAnim 和popExitAnim）时发生转换）。</p>
<h5 id="在Fragment目标之间添加共享元素转换"><a href="#在Fragment目标之间添加共享元素转换" class="headerlink" title="在Fragment目标之间添加共享元素转换"></a>在Fragment目标之间添加共享元素转换</h5><p>除了过渡动画之外，Navigation还支持在目标之间添加共享元素过渡。</p>
<p>与动画不同，共享元素转换是以编程方式提供的，而不是通过导航XML文件提供的，因为它们需要引用View您希望包含在共享元素转换中的 实例。</p>
<p>每种类型的目标都通过Navigator.Extras 接口的子类实现此编程API 。将Extras被传递到一个呼叫navigate()。</p>
<p>Fragment目标共享元素转换<br>在FragmentNavigator.Extras 类允许您附加共享元素到navigate()呼叫目的地的片段，如图下面的例子：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">val extras = FragmentNavigatorExtras(</span><br><span class="line">    imageView to <span class="string">"header_image"</span>,</span><br><span class="line">    titleView to <span class="string">"header_title"</span>)</span><br><span class="line">view.findNavController().navigate(R.id.confirmationAction,</span><br><span class="line">    <span class="keyword">null</span>, <span class="comment">// Bundle of args</span></span><br><span class="line">    <span class="keyword">null</span>, <span class="comment">// NavOptions</span></span><br><span class="line">    extras)</span><br></pre></td></tr></table></figure></p>
<p>⚠️：这里的header_image和header_title要确保在当前布局的android:transitionName和需要调整的布局的android:transitionName一样</p>
<h5 id="Activity目标共享元素转换"><a href="#Activity目标共享元素转换" class="headerlink" title="Activity目标共享元素转换"></a>Activity目标共享元素转换</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// Rename the Pair class from the Android framework to avoid a name clash</span><br><span class="line">import android.util.Pair as UtilPair</span><br><span class="line">///...</span><br><span class="line">val options = ActivityOptionsCompat.makeSceneTransitionAnimation(activity,</span><br><span class="line">        UtilPair.create(imageView, &quot;header_image&quot;),</span><br><span class="line">        UtilPair.create(titleView, &quot;header_title&quot;))</span><br><span class="line">val extras = ActivityNavigator.Extras(options)</span><br><span class="line">view.findNavController().navigate(R.id.details,</span><br><span class="line">    null, // Bundle of args</span><br><span class="line">    null, // NavOptions</span><br><span class="line">    extras)</span><br><span class="line"></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 使用NavigationUI更新UI组件</span><br><span class="line"></span><br><span class="line">导航架构组件包括NavigationUI类。 此类包含使用顶部应用栏，导航抽屉和底部导航管理导航的静态方法。</span><br><span class="line"></span><br><span class="line">#### 监听导航事件</span><br><span class="line">与NavController交互是在目的地之间导航的主要方法。 NavController负责用新目标替换NavHost的内容。 在许多情况下，UI元素 - 例如顶级应用栏或其他持久性导航控件（如BottomNavigationBar）在NavHost之外存在，并且需要在目的地之间导航时进行更新。</span><br><span class="line"></span><br><span class="line">NavController提供了一个OnDestinationChangedListener接口，当NavController的当前目标或其参数发生更改时，该接口将被调用。 可以通过addOnDestinationChangedListener（）方法注册新的侦听器，如下面的示例所示。 请注意，在调用addOnDestinationChangedListener（）时，如果当前目标存在，则会立即将其发送给您的侦听器。</span><br><span class="line"></span><br><span class="line">```Kotlin</span><br><span class="line">navController.addOnDestinationChangedListener &#123; navController, destination, arguments -&gt;</span><br><span class="line">  textView.setText(destination.label)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>NavigationUI使用OnDestinationChangedListener使这些常见的UI组件可以感知导航事件。 但请注意，您还可以单独使用OnDestinationChangedListener来使任何自定义UI或业务逻辑感知导航事件。</p>
<h4 id="顶部应用栏"><a href="#顶部应用栏" class="headerlink" title="顶部应用栏"></a>顶部应用栏</h4><p>顶部应用栏在应用顶部 提供了一致的位置，用于显示当前屏幕的信息和操作。<br><img src="./images/top-app-bar.png" alt="顶部导航"><br>NavigationUI包含在用户浏览应用时自动更新顶部应用栏中内容的方法。例如，NavigationUI使用导航图中的目标标签可以使顶部应用栏的标题保持最新。</p>
<p>使用NavigationUI下面讨论的顶级应用栏方法时，可以使用{argName}标签中的格式从提供给目标的参数中自动填充附加到目标的标签。</p>
<p>NavigationUI 提供以下顶级应用栏类型的支持：</p>
<ul>
<li>Toolbar</li>
<li>CollapsingToolbarLayout</li>
<li>ActionBar</li>
</ul>
<h4 id="AppBarConfiguration"><a href="#AppBarConfiguration" class="headerlink" title="AppBarConfiguration"></a>AppBarConfiguration</h4><p>NavigationUI使用AppBarConfiguration 对象来管理应用程序显示区域左上角的“导航”按钮的行为。默认情况下，当用户位于导航图的顶级目标位置时，导航按钮将隐藏，并在任何其他目标位置显示为“向上”按钮。</p>
<p>要将导航图的起始目的地用作唯一的顶级目的地，您可以创建一个AppBarConfiguration对象并传入相应的导航图，如下所示：<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> appBarConfiguration = AppBarConfiguration(navController.graph)</span><br></pre></td></tr></table></figure></p>
<p>如果要自定义哪些目标被视为顶级目标，则可以将一组目标ID传递给构造函数，如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val appBarConfiguration = AppBarConfiguration(setOf(R.id.main, R.id.android))</span><br></pre></td></tr></table></figure></p>
<h4 id="创建Toolbar"><a href="#创建Toolbar" class="headerlink" title="创建Toolbar"></a>创建Toolbar</h4><p>要使用NavigationUI创建工具栏，请首先在Activity中定义工具栏，如下所示：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/toolbar"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">fragment</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/nav_host_fragment"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">...</span> /&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>接下来，setupWithNavController() 从您的主要活动的onCreate()方法调用，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">override fun onCreate(savedInstanceState: Bundle?) &#123;</span><br><span class="line">    setContentView(R.layout.activity_main)</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">    //主导航Fragment</span><br><span class="line">    val navHostFragment = nav_host_fragment as NavHostFragment</span><br><span class="line">    // 其中toolbal为需要绑定的视图控件，目前支持12种视图控件；</span><br><span class="line">    NavigationUI.setupWithNavController(toolbar, navHostFragment.navController)</span><br></pre></td></tr></table></figure>
<p>⚠️：注意：使用工具栏时，导航会自动处理“导航”按钮的单击事件，因此您无需覆盖onSupportNavigateUp（）。<strong>！！！如果使用带menu菜单的控件如BottomNavigationView时，需要确保menu的id和需要跳转的导航图中的fragment的ID一致！！！</strong></p>
<h4 id="包括CollapsingToolbarLayout"><a href="#包括CollapsingToolbarLayout" class="headerlink" title="包括CollapsingToolbarLayout"></a>包括CollapsingToolbarLayout</h4><p>要CollapsingToolbarLayout在工具栏中添加a ，请先在主要活动中定义工具栏和周围布局，如下所示：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.AppBarLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"@dimen/tall_toolbar_height"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">android.support.design.widget.CollapsingToolbarLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/collapsing_toolbar_layout"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:contentScrim</span>=<span class="string">"?attr/colorPrimary"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:expandedTitleGravity</span>=<span class="string">"top"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_scrollFlags</span>=<span class="string">"scroll|exitUntilCollapsed|snap"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">"@+id/toolbar"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">"?attr/actionBarSize"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_collapseMode</span>=<span class="string">"pin"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">android.support.design.widget.CollapsingToolbarLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.design.widget.AppBarLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">fragment</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/nav_host_fragment"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">...</span> /&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>接下来，setupWithNavController() 从您的主要活动的onCreate方法调用，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">override fun onCreate(savedInstanceState: Bundle?) &#123;</span><br><span class="line">    setContentView(R.layout.activity_main)</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    //主导航Fragment</span><br><span class="line">    val navHostFragment = nav_host_fragment as NavHostFragment</span><br><span class="line">    // 其中toolbal为需要绑定的视图控件，目前支持12种视图控件；</span><br><span class="line">    NavigationUI.setupWithNavController(toolbar, navHostFragment.navController)</span><br></pre></td></tr></table></figure>
<h4 id="Action-bar"><a href="#Action-bar" class="headerlink" title="Action bar"></a>Action bar</h4><p>要使用默认操作栏包含导航支持，请setupActionBarWithNavController() 从主Activity的onCreate()方法中调用 ，如下所示。请注意，您需要声明自己的AppBarConfiguration外部onCreate()，因为您在覆盖时也使用它onSupportNavigateUp():<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">private lateinit var appBarConfiguration: AppBarConfiguration</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">override fun onCreate(savedInstanceState: Bundle?) &#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    val navController = findNavController(R.id.nav_host_fragment)</span><br><span class="line">    appBarConfiguration = AppBarConfiguration(navController.graph)</span><br><span class="line">    setupActionBarWithNavController(navController, appBarConfiguration)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>接下来，覆盖onSupportNavigateUp()以处理向上导航：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">override fun onSupportNavigateUp(): Boolean &#123;</span><br><span class="line">    return navController.navigateUp(appBarConfiguration) || super.onSupportNavigateUp()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="将目的地绑定到菜单项"><a href="#将目的地绑定到菜单项" class="headerlink" title="将目的地绑定到菜单项"></a>将目的地绑定到菜单项</h4><p>NavigationUI还提供了将目标绑定到菜单驱动的UI组件的帮助程序。NavigationUI包含一个辅助方法，onNavDestinationSelected()它MenuItem与NavController托管关联目标的方法一起使用 。如果id在的MenuItem比赛的id目标时，NavController可以然后导航到目的地。</p>
<p>作为一个例子，下面的XML片断定义一个菜单项，并具 <strong>有共同的目的地id（id需要一致）</strong>  ，details_page_fragment：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;navigation xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</span><br><span class="line">    xmlns:tools=&quot;http://schemas.android.com/tools&quot;</span><br><span class="line">    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    ... &gt;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    &lt;fragment android:id=&quot;@+id/details_page_fragment&quot;</span><br><span class="line">         android:label=&quot;@string/details&quot;</span><br><span class="line">         android:name=&quot;com.example.android.myapp.DetailsFragment&quot; /&gt;</span><br><span class="line">&lt;/navigation&gt;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    &lt;item</span><br><span class="line">        android:id=&quot;@id/details_page_fragment&quot;</span><br><span class="line">        android:icon=&quot;@drawable/ic_details&quot;</span><br><span class="line">        android:title=&quot;@string/details&quot; /&gt;</span><br><span class="line">&lt;/menu&gt;</span><br></pre></td></tr></table></figure>
<p>例如，如果您的菜单是通过Activity的onCreateOptionsMenu（）添加的，则可以通过覆盖Activity的onOptionsItemSelected（）来调用onNavDestinationSelected（）来关联菜单项和目标，如下所示：<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onOptionsItemSelected</span><span class="params">(item: <span class="type">MenuItem</span>)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">    <span class="keyword">val</span> navController = findNavController(R.id.nav_host)</span><br><span class="line">    <span class="keyword">return</span> item.onNavDestinationSelected(navController) || <span class="keyword">super</span>.onOptionsItemSelected(item)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>现在，当用户单击details_page_fragment菜单项时，应用程序会自动导航到 <strong>具有相同ID的相应目标</strong> 。</p>
<h4 id="添加导航抽屉"><a href="#添加导航抽屉" class="headerlink" title="添加导航抽屉"></a>添加导航抽屉</h4><p>导航抽屉是一个UI面板，显示应用程序的主导航菜单。 当用户触摸应用栏中的抽屉图标或用户从屏幕的左边缘滑动手指时，抽屉出现。<br><img src="./images/navigation-drawer.png" alt="导航抽屉"><br>抽屉图标显示在使用DrawerLayout的所有顶级目标上。 顶级目标是应用程序的根级目标。 它们不会在应用栏中显示“向上”按钮。</p>
<p>要添加导航抽屉，首先将DrawerLayout声明为根视图。 在DrawerLayout内，添加主UI内容的布局和包含导航抽屉内容的另一个视图。</p>
<p>例如，以下布局使用具有两个子视图的DrawerLayout：NavHostFragment包含主要内容，NavigationView用于导航抽屉的内容。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="comment">&lt;!-- Use DrawerLayout as root container for activity --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.v4.widget.DrawerLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/drawer_layout"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:fitsSystemWindows</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Layout to contain contents of main body of screen (drawer will slide over this) --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">fragment</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"androidx.navigation.fragment.NavHostFragment"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/nav_host_fragment"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:defaultNavHost</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:navGraph</span>=<span class="string">"@navigation/nav_graph"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Container for contents of drawer - use NavigationView to make configuration easier --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.NavigationView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/nav_view"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">"start"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fitsSystemWindows</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.v4.widget.DrawerLayout</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>接下来，DrawerLayout 通过将其传递到导航图，将其连接到AppBarConfiguration，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val appBarConfiguration = AppBarConfiguration(navController.graph, drawerLayout)</span><br></pre></td></tr></table></figure>
<p>⚠️：使用时NavigationUI，顶部应用栏帮助器会在当前目标更改时自动在抽屉图标和“向上”图标之间切换。你不需要使用 ActionBarDrawerToggle。<br>接下来，在主Activity类中，setupWithNavController() 从主活动的onCreate()方法调用 ，如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">override fun onCreate(savedInstanceState: Bundle?) &#123;</span><br><span class="line">    setContentView(R.layout.activity_main)</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    val navController = findNavController(R.id.nav_host_fragment)</span><br><span class="line">    findViewById&lt;NavigationView&gt;(R.id.nav_view)</span><br><span class="line">        .setupWithNavController(navController)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="底部导航"><a href="#底部导航" class="headerlink" title="底部导航"></a>底部导航</h4><p>NavigationUI也可以处理底部导航。当用户选择菜单项时，NavController调用 onNavDestinationSelected() 并自动更新底部导航栏中的所选项。<br><img src="./images/bottom-navigation.png" alt="底部导航"><br>要在应用中创建底部导航栏，请先在主要活动中定义栏，如下所示：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="tag">&lt;<span class="name">fragment</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/nav_host_fragment"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">...</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.BottomNavigationView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/bottom_nav"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:menu</span>=<span class="string">"@menu/menu_bottom_nav"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>接下来，在Activity中，setupWithNavController() 从主活动的onCreate()方法调用 ，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">override fun onCreate(savedInstanceState: Bundle?) &#123;</span><br><span class="line">    setContentView(R.layout.activity_main)</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    val navController = findNavController(R.id.nav_host_fragment)</span><br><span class="line">    findViewById&lt;BottomNavigationView&gt;(R.id.bottom_nav)</span><br><span class="line">        .setupWithNavController(navController)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="嵌套导航图"><a href="#嵌套导航图" class="headerlink" title="嵌套导航图"></a>嵌套导航图</h3><p>可以将一系列目标分组为称为根图的父导航图中的嵌套图。 嵌套图对于组织和重用应用程序UI的各个部分非常有用，例如自包含的登录流程。</p>
<p>嵌套图封装了其目标。 与根图一样，嵌套图必须将目标标识为起始目标。 嵌套图外部的目标（例如根图上的目标）仅通过其起始目标访问嵌套图。</p>
<p>图显示了一个简单的汇款应用程序的导航图。 从左侧的起始目的地开始，图表有两个流程：一个沿着顶部用于发送货币，另一个沿着底部用于查看帐户余额。<br><img src="./images/navigation-pre-nestedgraph_2x.png" alt="汇款导航图"><br>要将目标分组到嵌套图中，请执行以下操作：</p>
<ol>
<li>在导航编辑器中，按住Shift键，然后单击要包含在嵌套图中的目标。</li>
<li>右键单击以打开上下文菜单，然后选择 <strong>Move to Nested Graph &gt; New Graph</strong> 。目标包含在嵌套图中。图显示了 <strong>Navigation Editor</strong> 中的嵌套图：<br><img src="./images/navigation-nestedgraph_2x.png" alt="Graph Editor中的嵌套图"></li>
<li><p>单击嵌套图。<strong>Attributes</strong> 面板中显示以下属性 ：</p>
<ul>
<li>Type，其中包含”Nested Graph”</li>
<li>ID，包含嵌套图的系统分配ID。此ID用于引用代码中的嵌套图。</li>
</ul>
</li>
<li><p>双击嵌套图形以显示其目标。</p>
</li>
<li><p>单击 <strong>Text</strong> 选项卡以切换到XML视图。图表中添加了嵌套导航图。此导航图有自己的navigation 元素，以及它自己的ID和startDestination指向嵌套图中第一个目标的属性：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;navigation xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</span><br><span class="line">    xmlns:tools=&quot;http://schemas.android.com/tools&quot;</span><br><span class="line">    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    app:startDestination=&quot;@id/mainFragment&quot;&gt;</span><br><span class="line">    &lt;fragment</span><br><span class="line">        android:id=&quot;@+id/mainFragment&quot;</span><br><span class="line">        android:name=&quot;com.example.cashdog.cashdog.MainFragment&quot;</span><br><span class="line">        android:label=&quot;fragment_main&quot;</span><br><span class="line">        tools:layout=&quot;@layout/fragment_main&quot; &gt;</span><br><span class="line">        &lt;action</span><br><span class="line">            android:id=&quot;@+id/action_mainFragment_to_chooseRecipient&quot;</span><br><span class="line">            app:destination=&quot;@id/sendMoneyGraph&quot; /&gt;</span><br><span class="line">        &lt;action</span><br><span class="line">            android:id=&quot;@+id/action_mainFragment_to_viewBalanceFragment&quot;</span><br><span class="line">            app:destination=&quot;@id/viewBalanceFragment&quot; /&gt;</span><br><span class="line">    &lt;/fragment&gt;</span><br><span class="line">    &lt;fragment</span><br><span class="line">        android:id=&quot;@+id/viewBalanceFragment&quot;</span><br><span class="line">        android:name=&quot;com.example.cashdog.cashdog.ViewBalanceFragment&quot;</span><br><span class="line">        android:label=&quot;fragment_view_balance&quot;</span><br><span class="line">        tools:layout=&quot;@layout/fragment_view_balance&quot; /&gt;</span><br><span class="line">    &lt;navigation android:id=&quot;@+id/sendMoneyGraph&quot; app:startDestination=&quot;@id/chooseRecipient&quot;&gt;</span><br><span class="line">        &lt;fragment</span><br><span class="line">            android:id=&quot;@+id/chooseRecipient&quot;</span><br><span class="line">            android:name=&quot;com.example.cashdog.cashdog.ChooseRecipient&quot;</span><br><span class="line">            android:label=&quot;fragment_choose_recipient&quot;</span><br><span class="line">            tools:layout=&quot;@layout/fragment_choose_recipient&quot;&gt;</span><br><span class="line">            &lt;action</span><br><span class="line">                android:id=&quot;@+id/action_chooseRecipient_to_chooseAmountFragment&quot;</span><br><span class="line">                app:destination=&quot;@id/chooseAmountFragment&quot; /&gt;</span><br><span class="line">        &lt;/fragment&gt;</span><br><span class="line">        &lt;fragment</span><br><span class="line">            android:id=&quot;@+id/chooseAmountFragment&quot;</span><br><span class="line">            android:name=&quot;com.example.cashdog.cashdog.ChooseAmountFragment&quot;</span><br><span class="line">            android:label=&quot;fragment_choose_amount&quot;</span><br><span class="line">            tools:layout=&quot;@layout/fragment_choose_amount&quot; /&gt;</span><br><span class="line">    &lt;/navigation&gt;</span><br><span class="line">&lt;/navigation&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在您的代码中，将连接根图的操作的资源ID传递给嵌套图：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">view.findNavController().navigate(R.id.action_mainFragment_to_sendMoneyGraph)</span><br></pre></td></tr></table></figure>
</li>
<li><p>返回 <strong>Design</strong> 选项卡，可以通过单击 <strong>Root</strong> 返回到根图 。</p>
</li>
</ol>
<h4 id="使用引用其他导航图"><a href="#使用引用其他导航图" class="headerlink" title="使用引用其他导航图"></a>使用<include>引用其他导航图</include></h4><p>在导航图中，您可以使用include引用其他图形。 虽然这在功能上与使用嵌套图相同，但include允许您使用其他项目模块或库项目中的图形，如下例所示：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- (root) nav_graph.xml --&gt;</span></span><br><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">navigation</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/nav_graph"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:startDestination</span>=<span class="string">"@id/fragment"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">app:graph</span>=<span class="string">"@navigation/included_graph"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">fragment</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/fragment"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"com.example.myapplication.BlankFragment"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:label</span>=<span class="string">"Fragment in Root Graph"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">tools:layout</span>=<span class="string">"@layout/fragment_blank"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/action_fragment_to_second_graph"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:destination</span>=<span class="string">"@id/second_graph"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">fragment</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">navigation</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- included_graph.xml --&gt;</span></span><br><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">navigation</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/second_graph"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:startDestination</span>=<span class="string">"@id/includedStart"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">fragment</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/includedStart"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"com.example.myapplication.IncludedStart"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:label</span>=<span class="string">"fragment_included_start"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">tools:layout</span>=<span class="string">"@layout/fragment_included_start"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">navigation</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="数据传递"><a href="#数据传递" class="headerlink" title="数据传递"></a>数据传递</h3><p>导航允许您通过定义目标的参数将数据附加到导航操作。例如，用户配置文件目标可能会使用用户ID参数来确定要显示的用户。</p>
<p>通常，您应该更倾向于仅在目标之间传递最少量的数据。例如，您应该传递一个键来检索一个对象而不是传递该对象本身，因为所有已保存状态的总空间在Android上是有限的。如果需要传递大量数据，请考虑使用片段之间共享数据中ViewModel所述的方法 。</p>
<h4 id="定义目标参数"><a href="#定义目标参数" class="headerlink" title="定义目标参数"></a>定义目标参数</h4><p>要在目标之间传递数据，首先通过以下步骤将参数添加到接收它的目标来定义参数：</p>
<ol>
<li>在导航编辑器中，单击接收参数的目标。</li>
<li>在 <strong>Attributes</strong> 面板中，单击 <strong>Add（+）</strong>。</li>
<li>在出现的 <strong>Add Argument Link</strong> 窗口中，输入参数名称，参数类型，参数是否可为空，以及默认值（如果需要）。</li>
<li>单击 <strong>Add</strong> 。请注意，该参数现在显示 在 <strong>Arguments</strong> 面板的 <strong>Attributes</strong> 列表中。</li>
<li>接下来，单击将您带到此目的地的相应操作。在 <strong>Attributes</strong> 面板中，您现在应该在  <strong>Argument Default Values</strong> 部分中看到新添加的参数。</li>
<li>您还可以看到该参数是以XML格式添加的。单击 <strong>Text</strong> 选项卡以切换到XML视图，并注意您的参数已添加到接收参数的目标。一个例子如下所示：</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">fragment</span> <span class="attr">android:id</span>=<span class="string">"@+id/myFragment"</span> &gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">argument</span></span></span><br><span class="line"><span class="tag">         <span class="attr">android:name</span>=<span class="string">"myArg"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">app:argType</span>=<span class="string">"integer"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">android:defaultValue</span>=<span class="string">"0"</span> /&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">fragment</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="覆盖操作中的目标参数"><a href="#覆盖操作中的目标参数" class="headerlink" title="覆盖操作中的目标参数"></a>覆盖操作中的目标参数</h4><p>目标级参数和默认值由导航到目标的所有操作使用。如果需要，您可以通过在操作级别定义参数来覆盖参数的默认值（如果尚不存在，则设置一个参数）。此参数必须与目标中声明的参数 <strong>具有相同的名称和类型</strong> 。</p>
<p>下面的XML声明了一个带有参数的操作，该参数覆盖了上面示例中的目标级参数：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">action</span> <span class="attr">android:id</span>=<span class="string">"@+id/startMyFragment"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:destination</span>=<span class="string">"@+id/myFragment"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">argument</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"myArg"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:argType</span>=<span class="string">"integer"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:defaultValue</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="使用Safe-Args传递类型安全的数据"><a href="#使用Safe-Args传递类型安全的数据" class="headerlink" title="使用Safe Args传递类型安全的数据"></a>使用Safe Args传递类型安全的数据</h4><p>Navigation Architecture Component有一个名为Safe Args的Gradle插件，它生成简单的对象和构建器类，以便对目标和操作指定的参数进行类型安全访问。</p>
<p>要使用Safe Args，请先将androidx.navigation.safeargs插件添加到应用程序的build.gradle文件中，如下所示：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: <span class="string">'com.android.application'</span></span><br><span class="line">apply plugin: <span class="string">'androidx.navigation.safeargs'</span></span><br><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">   <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>例外还需在项目build.gradle中添加：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">classpath &quot;android.arch.navigation:navigation-safe-args-gradle-plugin:1.0.0-alpha09&quot;</span><br></pre></td></tr></table></figure></p>
<p>启用插件后，生成的代码包含操作的其他简单对象和构建器类以及发送和接收目标。这些类描述如下：</p>
<ul>
<li>为动作发起的每个目标创建一个类。此类的名称是始发目标的名称，后面附加 <strong>“Directions”</strong> 一词。例如，如果始发目标是已命名的片段，SpecifyAmountFragment则将调用生成的类 SpecifyAmountFragmentDirections。</li>
<li>此类具有针对始发目标中定义的每个操作的方法。</li>
<li>对于用于传递参数的每个操作，将创建一个内部类，其名称基于操作。例如，如果调用confirmationAction,该操作 ，则命名该类ConfirmationAction。</li>
<li>为接收目标创建一个类。此类的名称是目标的名称，后面附加单词“Args”。例如，如果命名目标片段，ConfirmationFragment,则调用生成的类ConfirmationFragmentArgs。使用此类的fromBundle()方法来检索参数。</li>
</ul>
<p>以下示例说明如何使用这些方法设置参数并将其传递给navigate() 方法：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">override fun <span class="title">onClick</span><span class="params">(v: View)</span> </span>&#123;</span><br><span class="line">   val amountTv: EditText = view!!.findViewById(R.id.editTextAmount)</span><br><span class="line">   val amount = amountTv.text.toString().toInt()</span><br><span class="line">   val action = SpecifyAmountFragmentDirections.confirmationAction(amount)</span><br><span class="line">   v.findNavController().navigate(action)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在接收目标的代码中，使用该 getArguments()方法检索包并使用其内容：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">override fun <span class="title">onViewCreated</span><span class="params">(view: View, savedInstanceState: Bundle?)</span> </span>&#123;</span><br><span class="line">    val tv: TextView = view.findViewById(R.id.textViewAmount)</span><br><span class="line">    val amount = ConfirmationFragmentArgs.fromBundle(arguments).amount</span><br><span class="line">    tv.text = amount.toString()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="使用具有全局操作的Safe-Args"><a href="#使用具有全局操作的Safe-Args" class="headerlink" title="使用具有全局操作的Safe Args"></a>使用具有全局操作的Safe Args</h5><p>使用具有全局操作的 Safe Args时 ，必须为android:id根<navigation>元素提供值，如以下示例所示：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">navigation</span> <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/main_nav"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:startDestination</span>=<span class="string">"@id/mainFragment"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">navigation</span>&gt;</span></span><br></pre></td></tr></table></figure></navigation></p>
<p>导航为基于该值Directions的<navigation>元素生成一个类android:id。例如，如果您有一个<navigation> 元素android:id=@+id/main_nav，则调用生成的类 MainNavDirections。<navigation>元素中的所有目标都扩展了MainNavDirections类，并且可以使用与上一节中描述的方法相同的方法访问所有关联的全局操作。</navigation></navigation></navigation></p>
<h4 id="使用Bundle对象在目标之间传递数据"><a href="#使用Bundle对象在目标之间传递数据" class="headerlink" title="使用Bundle对象在目标之间传递数据"></a>使用Bundle对象在目标之间传递数据</h4><p>如果您不使用Gradle，则仍可以使用Bundle对象在目标之间传递参数。使用创建Bundle对象并将其传递到目标navigate()，如下所示<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var bundle = bundleOf(<span class="string">"amount"</span> to amount)</span><br><span class="line">view.findNavController().navigate(R.id.confirmationAction, bundle)</span><br></pre></td></tr></table></figure></p>
<p>在接收目标的代码中，使用该 getArguments()方法检索Bundle并使用其内容：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">val tv = view.findViewById&lt;TextView&gt;(R.id.textViewAmount)</span><br><span class="line">tv.text = arguments.getString(<span class="string">"amount"</span>)</span><br></pre></td></tr></table></figure></p>
<h3 id="支持"><a href="#支持" class="headerlink" title="支持"></a>支持</h3><p>添加对新目标类型的支持<br>NavControllers依靠一个或多个Navigator对象来执行导航操作。默认情况下，所有 NavControllers支持通过使用ActivityNavigator 类及其嵌套 ActivityNavigator.Destination 类导航到另一个活动而离开导航图 。为了能够导航到任何其他类型的目标，Navigator必须将一个或多个其他对象添加到 NavController。例如，当使用片段作为目标时，会 NavHostFragment 自动将FragmentNavigator 类添加到其中 NavController。</p>
<p>要向a添加新的Navigator对象 NavController，必须使用相应的Navigator类的 getNavigatorProvider()方法，然后使用类的addNavigator()方法。以下代码显示了将虚构CustomNavigator 对象添加到以下内容的示例NavController：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">val customNavigator = CustomNavigator()</span><br><span class="line">navController.navigatorProvider += customNavigator</span><br></pre></td></tr></table></figure></p>
<p>大多数Navigator 类都有一个嵌套的目标子类。此子类可用于指定目标唯一的其他属性。有关Destination子类的详细信息，请参阅相应Navigator类的参考文档 。</p>
<h3 id="条件导航"><a href="#条件导航" class="headerlink" title="条件导航"></a>条件导航</h3><p>您的应用程序可能有一系列条件目标，这些目标仅在某些条件下使用，例如当用户需要登录时。这些目标应创建为单独的目标，或嵌套导航图，另一个目标作为另一个目标启动需要。图1显示了导航到配置文件目的地的用户，该配置文件目的地确定用户未登录后，要求用户导航到登录目的地。登录目的地然后在登录完成后将用户返回到配置文件目的地。<br><img src="./images/navigation-conditional-graph.png" alt=""><br>登录目标应在返回到配置文件目标后从导航堆栈中弹出。popBackStack() 导航回原始目的地时调用 方法。原始目标将从导航堆栈“弹出”并变为活动状态。</p>
<h3 id="全局导航"><a href="#全局导航" class="headerlink" title="全局导航"></a>全局导航</h3><p>您可以使用全局操作来创建多个目标可以使用的公共操作。例如，您可能希望不同目的地的按钮导航到同一主应用程序屏幕。</p>
<p>导航编辑器中的一个全局操作由指向关联目标的小箭头表示，如图1所示<br><img src="./images/navigation-global-action.png" alt="导入嵌套图的全局操作"></p>
<h4 id="创建一个全局行动"><a href="#创建一个全局行动" class="headerlink" title="创建一个全局行动"></a>创建一个全局行动</h4><p>要创建全局操作，请执行以下操作：</p>
<ol>
<li>在“ 曲线图编辑器”中，单击目标以突出显示它。</li>
<li>右键单击目标以显示上下文菜单。</li>
<li>选择添加操作&gt;全局。箭头（）出现在目的地的左侧。</li>
<li>单击“ 文本”选项卡以导航到XML文本视图。全局操作的XML类似于以下内容：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;navigation xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</span><br><span class="line">            xmlns:tools=&quot;http://schemas.android.com/tools&quot;</span><br><span class="line">            xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">            android:id=&quot;@+id/main_nav&quot;</span><br><span class="line">            app:startDestination=&quot;@id/mainFragment&quot;&gt;</span><br><span class="line"></span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  &lt;action android:id=&quot;@+id/action_global_mainFragment&quot;</span><br><span class="line">          app:destination=&quot;@id/mainFragment&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/navigation&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="使用全局操作"><a href="#使用全局操作" class="headerlink" title="使用全局操作"></a>使用全局操作</h4><p>要在代码中使用全局操作，请将全局操作的资源ID传递navigate() 给每个UI元素的方法，如以下示例所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">viewTransactionButton.setOnClickListener &#123; view -&gt;</span><br><span class="line">    view.findNavController().navigate(R.id.action_global_mainFragment)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="迁移到导航"><a href="#迁移到导航" class="headerlink" title="迁移到导航"></a>迁移到导航</h3><p>该NavController导航图及其导航图包含在单个活动中。因此，在迁移现有项目以使用导航架构组件时，请通过为每个活动中的目标创建导航图，重点关注一次迁移一个活动。<br><img src="./images/navigation-migrate1.png" alt="活动及其各个导航图"><br>然后，可以通过向导航图添加活动目标来链接单独的活动，从而替换startActivity()整个代码库中的现有用法。</p>
<p><img src="./images/navigation-migrate2.png" alt="一个Activity中的导航图指向第二个Activity"><br>在多个活动共享相同布局的情况下，可以组合导航图，将导航调用替换为活动目标，以直接在两个导航图之间导航调用。</p>
<p><img src="./images/navigation-migrate3.png" alt="包含组合导航图的活动。"></p>
<p>参考：<br>[1]. 官网 <a href="https://developer.android.com/topic/libraries/architecture/navigation/" target="_blank" rel="noopener">https://developer.android.com/topic/libraries/architecture/navigation/</a><br>[2]. 官网demo <a href="https://github.com/googlecodelabs/android-navigation" target="_blank" rel="noopener">https://github.com/googlecodelabs/android-navigation</a><br>[3]. 官网教程 <a href="https://codelabs.developers.google.com/codelabs/android-navigation/#0" target="_blank" rel="noopener">https://codelabs.developers.google.com/codelabs/android-navigation/#0</a><br>[4]. 关于navigation的解析 <a href="https://www.jianshu.com/p/ad040aab0e66" target="_blank" rel="noopener">https://www.jianshu.com/p/ad040aab0e66</a></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Navigation/" rel="tag"># Navigation</a>
          
            <a href="/tags/fragment/" rel="tag"># fragment</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/12/24/SpringBoot-Database-H2/" rel="next" title="SpringBoot Database H2">
                <i class="fa fa-chevron-left"></i> SpringBoot Database H2
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">CallteFoot</p>
              <p class="site-description motion-element" itemprop="description">the blog from a anroid coder</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">50</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">68</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#概念"><span class="nav-number">1.</span> <span class="nav-text">概念</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#导航架构组件"><span class="nav-number">1.1.</span> <span class="nav-text">导航架构组件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#导航原理"><span class="nav-number">1.2.</span> <span class="nav-text">导航原理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#固定起始目的地"><span class="nav-number">1.2.1.</span> <span class="nav-text">固定起始目的地</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#导航状态应该通过堆栈目的地来表示"><span class="nav-number">1.2.2.</span> <span class="nav-text">导航状态应该通过堆栈目的地来表示</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#“向上”按钮永远不会退出您的应用"><span class="nav-number">1.2.3.</span> <span class="nav-text">“向上”按钮永远不会退出您的应用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#在应用程序的任务中，向上和向后相同"><span class="nav-number">1.2.4.</span> <span class="nav-text">在应用程序的任务中，向上和向后相同</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#深度链接和导航到目标应该产生相同的堆栈"><span class="nav-number">1.2.5.</span> <span class="nav-text">深度链接和导航到目标应该产生相同的堆栈</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用"><span class="nav-number">2.</span> <span class="nav-text">使用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#为项目引入导航组件"><span class="nav-number">2.1.</span> <span class="nav-text">为项目引入导航组件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#创建导航图"><span class="nav-number">2.2.</span> <span class="nav-text">创建导航图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#浏览导航编辑器"><span class="nav-number">2.3.</span> <span class="nav-text">浏览导航编辑器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#创建目的地"><span class="nav-number">2.4.</span> <span class="nav-text">创建目的地</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#连接目的地"><span class="nav-number">2.5.</span> <span class="nav-text">连接目的地</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#将屏幕指定为起始目的地"><span class="nav-number">2.6.</span> <span class="nav-text">将屏幕指定为起始目的地</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#修改活动以主持导航"><span class="nav-number">2.7.</span> <span class="nav-text">修改活动以主持导航</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#使用布局编辑器添加NavHostFragment"><span class="nav-number">2.7.1.</span> <span class="nav-text">使用布局编辑器添加NavHostFragment</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#以编程方式创建NavHostFragment"><span class="nav-number">2.8.</span> <span class="nav-text">以编程方式创建NavHostFragment</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#将目标绑定到ui小部件"><span class="nav-number">2.9.</span> <span class="nav-text">将目标绑定到ui小部件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#为目标创建深层链接"><span class="nav-number">2.10.</span> <span class="nav-text">为目标创建深层链接</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#为目标分配深层链接"><span class="nav-number">2.10.1.</span> <span class="nav-text">为目标分配深层链接</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#为深层链接添加意图过滤器"><span class="nav-number">2.10.2.</span> <span class="nav-text">为深层链接添加意图过滤器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#以编程方式使用NavDeepLinkBuilder创建深层链接"><span class="nav-number">2.10.3.</span> <span class="nav-text">以编程方式使用NavDeepLinkBuilder创建深层链接</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#在目的地之间创建过渡"><span class="nav-number">2.10.4.</span> <span class="nav-text">在目的地之间创建过渡</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#在Fragment目标之间添加共享元素转换"><span class="nav-number">2.10.5.</span> <span class="nav-text">在Fragment目标之间添加共享元素转换</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Activity目标共享元素转换"><span class="nav-number">2.10.6.</span> <span class="nav-text">Activity目标共享元素转换</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#顶部应用栏"><span class="nav-number">2.11.</span> <span class="nav-text">顶部应用栏</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AppBarConfiguration"><span class="nav-number">2.12.</span> <span class="nav-text">AppBarConfiguration</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#创建Toolbar"><span class="nav-number">2.13.</span> <span class="nav-text">创建Toolbar</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#包括CollapsingToolbarLayout"><span class="nav-number">2.14.</span> <span class="nav-text">包括CollapsingToolbarLayout</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Action-bar"><span class="nav-number">2.15.</span> <span class="nav-text">Action bar</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#将目的地绑定到菜单项"><span class="nav-number">2.16.</span> <span class="nav-text">将目的地绑定到菜单项</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#添加导航抽屉"><span class="nav-number">2.17.</span> <span class="nav-text">添加导航抽屉</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#底部导航"><span class="nav-number">2.18.</span> <span class="nav-text">底部导航</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#嵌套导航图"><span class="nav-number">3.</span> <span class="nav-text">嵌套导航图</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#使用引用其他导航图"><span class="nav-number">3.1.</span> <span class="nav-text">使用引用其他导航图</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据传递"><span class="nav-number">4.</span> <span class="nav-text">数据传递</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#定义目标参数"><span class="nav-number">4.1.</span> <span class="nav-text">定义目标参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#覆盖操作中的目标参数"><span class="nav-number">4.2.</span> <span class="nav-text">覆盖操作中的目标参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用Safe-Args传递类型安全的数据"><span class="nav-number">4.3.</span> <span class="nav-text">使用Safe Args传递类型安全的数据</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#使用具有全局操作的Safe-Args"><span class="nav-number">4.3.1.</span> <span class="nav-text">使用具有全局操作的Safe Args</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用Bundle对象在目标之间传递数据"><span class="nav-number">4.4.</span> <span class="nav-text">使用Bundle对象在目标之间传递数据</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#支持"><span class="nav-number">5.</span> <span class="nav-text">支持</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#条件导航"><span class="nav-number">6.</span> <span class="nav-text">条件导航</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#全局导航"><span class="nav-number">7.</span> <span class="nav-text">全局导航</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#创建一个全局行动"><span class="nav-number">7.1.</span> <span class="nav-text">创建一个全局行动</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用全局操作"><span class="nav-number">7.2.</span> <span class="nav-text">使用全局操作</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#迁移到导航"><span class="nav-number">8.</span> <span class="nav-text">迁移到导航</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">CallteFoot</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
